(function(){define(["libBootstrapUpload","libJqUtils"],function(){var i,e,n,t,l,r;console.log("premiumImgs..."),r={body:"body, html",select:".js-premium-cbo",ctn:".img-ctn",input:".js-fileinput",tpl:"#tplImgInput",mainImg:".js-main-img"},n={},i=function(){return n.body=$(r.body),n.select=$(r.select),n.ctn=$(r.ctn),n.input=$(r.input),n.tpl=$(r.tpl).html(),n.mainImg=$(r.mainImg)},i(),e={},t={},l={bindSimple:function(){n.input.each(function(){var i,e;i=$(this),0===i.parents(".img-ctn").length&&(e=i.data("url-img"),i.fileinput({allowedFileExtensions:["jpg","gif","png","jpeg"],initialPreview:['<img src="'+e+'" height="160px">']}),$(r.mainImg).on("filecleared",function(){return i=$(this),i.attr("required","required"),i.attr("data-parsley-errors-container","#mainImg")}))})},dynamicInputs:function(){n.select.on("change",function(){var i;return i=$(this),l.initialPreview()})},firstChange:function(){console.log(n.select.val()),"3"===n.select.val()?l.showMultipleInputs():$.when(l.removeOthers()).then(function(){return l.initialPreview,l.showSingleInputs})},removeOthers:function(){$(".file-preview-frame").eq(2).find(".kv-file-remove").trigger("click"),$(".file-preview-frame").eq(3).find(".kv-file-remove").trigger("click"),$(".file-preview-frame").eq(4).find(".kv-file-remove").trigger("click")},initialPreview:function(){var i;i=$("input[name='id']").val(),utils.loader($("body"),!0),$.ajax({url:"/admpanel/provider/image-provider-premium/"+i,success:function(i){var e,n,r,a,o,p;for(t.html=[],t.config=[],p=i.data,n=r=0,a=p.length;a>r;n=++r)e=p[n],o={},o.caption=e.name,o.url="/admpanel/provider/delete-image-provider-premium",o.key=e.id,o.width="120px",o.extra=function(){return $(".kv-file-remove").unbind()},t.html.push('<img src="'+e.url+'" title="'+e.name_picture+'" class="file-preview-image">'),t.config.push(o);return l.firstChange(),utils.loader($("body"),!1)}})},showMultipleInputs:function(){n.ctn.html($(r.tpl).html()),$(".img-ctn .js-fileinput").fileinput({allowedFileExtensions:["jpg","gif","png","jpeg"],initialPreview:t.html,initialPreviewConfig:t.config,uploadUrl:"/admpanel/provider/image-provider-premium",uploadAsync:!0,minFileCount:1,maxFileCount:4,overwriteInitial:!1,uploadExtraData:{pr_provider_id:$("[name='id']").val()}})},showSingleInputs:function(){n.ctn.html($(r.tpl).html()),console.log("single"),$(".img-ctn .js-fileinput").fileinput({allowedFileExtensions:["jpg","gif","png","jpeg"],initialPreview:t.html,initialPreviewConfig:t.config,uploadUrl:"/admpanel/provider/image-provider-premium",uploadAsync:!0,minFileCount:1,maxFileCount:1,uploadExtraData:{pr_provider_id:$("[name='id']").val()}})}},l.bindSimple(),l.initialPreview(),l.dynamicInputs()})}).call(this);